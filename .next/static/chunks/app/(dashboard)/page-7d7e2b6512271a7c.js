(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[130,599],{5751:function(e,r,s){Promise.resolve().then(s.bind(s,6394))},6394:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return l}});var t=s(3827),a=s(4090),d=s(4599),n=s(509);let i={welcome:{en:"Welcome back",fr:"Bon retour",ht:"Byenveni ank\xf2",es:"Bienvenido de nuevo"},dashboard:{en:"Dashboard",fr:"Tableau de bord",ht:"Tablo b\xf2",es:"Panel"},totalProducts:{en:"Total Products",fr:"Total des produits",ht:"Total pwodui",es:"Total de productos"},activeProducts:{en:"Active Products",fr:"Produits actifs",ht:"Pwodui aktif",es:"Productos activos"},pendingOrders:{en:"Pending Orders",fr:"Commandes en attente",ht:"K\xf2mand an atant",es:"Pedidos pendientes"},totalSales:{en:"Total Sales",fr:"Ventes totales",ht:"Total lavant",es:"Ventas totales"},recentOrders:{en:"Recent Orders",fr:"Commandes r\xe9centes",ht:"K\xf2mand resan",es:"Pedidos recientes"},noOrders:{en:"No orders yet",fr:"Pas encore de commandes",ht:"Pa gen k\xf2mand ank\xf2",es:"Sin pedidos a\xfan"},viewAll:{en:"View All",fr:"Voir tout",ht:"W\xe8 tout",es:"Ver todo"},quickActions:{en:"Quick Actions",fr:"Actions rapides",ht:"Aksyon rapid",es:"Acciones r\xe1pidas"},addProduct:{en:"Add Product",fr:"Ajouter un produit",ht:"Ajoute pwodui",es:"Agregar producto"},viewOrders:{en:"View Orders",fr:"Voir les commandes",ht:"W\xe8 k\xf2mand",es:"Ver pedidos"},updateProfile:{en:"Update Profile",fr:"Mettre \xe0 jour le profil",ht:"Mete ajou pwofil",es:"Actualizar perfil"}};function l(){let[e,r]=(0,a.useState)({totalProducts:0,activeProducts:0,pendingOrders:0,totalSales:0}),[s,l]=(0,a.useState)([]),[o,c]=(0,a.useState)(""),[u,m]=(0,a.useState)(!0),{t:x}=(0,n.useLanguage)();(0,a.useEffect)(()=>{p()},[]);let p=async()=>{let e=(0,d.createClient)(),{data:{user:r}}=await e.auth.getUser();if(!r)return;let{data:s}=await e.from("supplier_users").select("supplier_id, supplier:platform_suppliers(name)").eq("auth_user_id",r.id).single();if(s){var t;c((null===(t=s.supplier)||void 0===t?void 0:t.name)||""),await h(e,s.supplier_id)}else{let{data:s}=await e.from("platform_suppliers").select("id, name").eq("contact_email",r.email).single();s&&(c(s.name),await h(e,s.id))}m(!1)},h=async(e,s)=>{let{count:t}=await e.from("platform_supplier_products").select("*",{count:"exact",head:!0}).eq("supplier_id",s),{count:a}=await e.from("platform_supplier_products").select("*",{count:"exact",head:!0}).eq("supplier_id",s).eq("is_active",!0),{count:d}=await e.from("marketplace_orders").select("*",{count:"exact",head:!0}).eq("supplier_id",s).in("status",["pending","confirmed","processing"]),{data:n}=await e.from("marketplace_orders").select("total_amount").eq("supplier_id",s).in("status",["delivered","received"]),i=(null==n?void 0:n.reduce((e,r)=>e+(r.total_amount||0),0))||0,{data:o}=await e.from("marketplace_orders").select("id, order_number, business_name, total_amount, status, created_at").eq("supplier_id",s).order("created_at",{ascending:!1}).limit(5);r({totalProducts:t||0,activeProducts:a||0,pendingOrders:d||0,totalSales:i}),l(o||[])},g=e=>({pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-blue-100 text-blue-800",processing:"bg-indigo-100 text-indigo-800",shipped:"bg-purple-100 text-purple-800",delivered:"bg-green-100 text-green-800",received:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[e]||"bg-gray-100 text-gray-800";return u?(0,t.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,t.jsxs)("div",{className:"p-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:[x("welcome",i.welcome),", ",o]}),(0,t.jsx)("p",{className:"text-gray-500",children:x("dashboard",i.dashboard)})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:x("totalProducts",i.totalProducts)}),(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:e.totalProducts})]}),(0,t.jsx)("div",{className:"p-3 bg-primary-100 rounded-lg",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-primary-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})})]})}),(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:x("activeProducts",i.activeProducts)}),(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:e.activeProducts})]}),(0,t.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:x("pendingOrders",i.pendingOrders)}),(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:e.pendingOrders})]}),(0,t.jsx)("div",{className:"p-3 bg-yellow-100 rounded-lg",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:x("totalSales",i.totalSales)}),(0,t.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:["$",e.totalSales.toFixed(2)]})]}),(0,t.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-sm border border-gray-100",children:[(0,t.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:x("recentOrders",i.recentOrders)}),(0,t.jsx)("a",{href:"/orders",className:"text-sm text-primary-600 hover:text-primary-700",children:x("viewAll",i.viewAll)})]})}),(0,t.jsx)("div",{className:"p-6",children:0===s.length?(0,t.jsx)("p",{className:"text-gray-500 text-center py-8",children:x("noOrders",i.noOrders)}):(0,t.jsx)("div",{className:"space-y-4",children:s.map(e=>{var r;return(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:e.order_number}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:e.business_name})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"font-medium text-gray-900",children:["$",null===(r=e.total_amount)||void 0===r?void 0:r.toFixed(2)]}),(0,t.jsx)("span",{className:"inline-flex px-2 py-0.5 text-xs font-medium rounded-full ".concat(g(e.status)),children:e.status})]})]},e.id)})})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[(0,t.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:x("quickActions",i.quickActions)})}),(0,t.jsxs)("div",{className:"p-6 space-y-3",children:[(0,t.jsxs)("a",{href:"/products/new",className:"flex items-center gap-3 p-4 bg-primary-50 rounded-lg hover:bg-primary-100 transition-colors",children:[(0,t.jsx)("div",{className:"p-2 bg-primary-100 rounded-lg",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-primary-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),(0,t.jsx)("span",{className:"font-medium text-primary-700",children:x("addProduct",i.addProduct)})]}),(0,t.jsxs)("a",{href:"/orders",className:"flex items-center gap-3 p-4 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:[(0,t.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,t.jsx)("span",{className:"font-medium text-blue-700",children:x("viewOrders",i.viewOrders)})]}),(0,t.jsxs)("a",{href:"/settings",className:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,t.jsx)("div",{className:"p-2 bg-gray-200 rounded-lg",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,t.jsx)("span",{className:"font-medium text-gray-700",children:x("updateProfile",i.updateProfile)})]})]})]})]})]})}},509:function(e,r,s){"use strict";s.r(r),s.d(r,{LanguageProvider:function(){return n},useLanguage:function(){return i}});var t=s(3827),a=s(4090);let d=(0,a.createContext)(void 0);function n(e){let{children:r}=e,[s,n]=(0,a.useState)("en");return(0,a.useEffect)(()=>{let e=localStorage.getItem("supplier-portal-language");e&&["en","fr","ht","es"].includes(e)&&n(e)},[]),(0,t.jsx)(d.Provider,{value:{language:s,setLanguage:e=>{n(e),localStorage.setItem("supplier-portal-language",e)},t:(e,r)=>r[s]||r.en||e},children:r})}function i(){let e=(0,a.useContext)(d);if(void 0===e)throw Error("useLanguage must be used within a LanguageProvider");return e}},4599:function(e,r,s){"use strict";s.d(r,{createClient:function(){return d}});var t=s(101),a=s(9079);function d(){return(0,t.AY)(a.env.NEXT_PUBLIC_SUPABASE_URL,a.env.NEXT_PUBLIC_SUPABASE_ANON_KEY)}}},function(e){e.O(0,[610,971,69,744],function(){return e(e.s=5751)}),_N_E=e.O()}]);