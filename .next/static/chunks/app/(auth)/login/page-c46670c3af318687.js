(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[665,599],{9461:function(e,s,t){Promise.resolve().then(t.bind(t,5382))},5382:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return d}});var r=t(3827),n=t(4090),a=t(7907),o=t(8792),i=t(4599),u=t(509);let l={title:{en:"Supplier Login",fr:"Connexion fournisseur",ht:"Konekte k\xf2m founis\xe8",es:"Inicio de sesi\xf3n"},subtitle:{en:"Access your supplier dashboard",fr:"Acc\xe9dez \xe0 votre tableau de bord",ht:"Jwenn aks\xe8 nan tablo b\xf2 ou",es:"Accede a tu panel"},email:{en:"Email",fr:"Email",ht:"Im\xe8l",es:"Correo electr\xf3nico"},emailPlaceholder:{en:"you@company.com",fr:"vous@entreprise.com",ht:"ou@konpayi.com",es:"tu@empresa.com"},password:{en:"Password",fr:"Mot de passe",ht:"Modpas",es:"Contrase\xf1a"},signIn:{en:"Sign In",fr:"Connexion",ht:"Konekte",es:"Iniciar sesi\xf3n"},signingIn:{en:"Signing in...",fr:"Connexion en cours...",ht:"Ap konekte...",es:"Iniciando sesi\xf3n..."},noAccount:{en:"Don't have an account?",fr:"Vous n'avez pas de compte?",ht:"Ou pa gen yon kont?",es:"\xbfNo tienes una cuenta?"},signUp:{en:"Apply to become a supplier",fr:"Postuler pour devenir fournisseur",ht:"Aplike pou vin founis\xe8",es:"Solicitar ser proveedor"},forgotPassword:{en:"Forgot password?",fr:"Mot de passe oubli\xe9?",ht:"Bliye modpas?",es:"\xbfOlvidaste tu contrase\xf1a?"}};function d(){let[e,s]=(0,n.useState)(""),[t,d]=(0,n.useState)(""),[c,p]=(0,n.useState)(!1),[m,f]=(0,n.useState)(""),h=(0,a.useRouter)(),{t:g}=(0,u.useLanguage)(),x=async s=>{var r;s.preventDefault(),p(!0),f("");let n=(0,i.createClient)(),{data:a,error:o}=await n.auth.signInWithPassword({email:e,password:t});if(o){f(o.message),p(!1);return}if(!a.user){f("Login failed"),p(!1);return}let{data:u}=await n.from("supplier_users").select("supplier_id, supplier:platform_suppliers(status)").eq("auth_user_id",a.user.id).single();if(!u){let{data:s}=await n.from("platform_suppliers").select("id, status").eq("contact_email",e).single();if(s){if("pending"===s.status){h.push("/pending");return}if("rejected"===s.status){f("Your application was not approved. Please contact support."),p(!1);return}if("suspended"===s.status){f("Your account has been suspended. Please contact support."),p(!1);return}}else{f("No supplier account found. Please sign up first."),p(!1);return}}let l=null==u?void 0:null===(r=u.supplier)||void 0===r?void 0:r.status;if("pending"===l){h.push("/pending");return}if("rejected"===l){f("Your application was not approved. Please contact support."),p(!1);return}if("suspended"===l){f("Your account has been suspended. Please contact support."),p(!1);return}h.push("/"),h.refresh()};return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-600 to-primary-800 py-12 px-4",children:(0,r.jsx)("div",{className:"max-w-md w-full",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary-100 mb-4",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-primary-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:g("title",l.title)}),(0,r.jsx)("p",{className:"text-gray-500 mt-2",children:g("subtitle",l.subtitle)})]}),m&&(0,r.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:m}),(0,r.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:g("email",l.email)}),(0,r.jsx)("input",{id:"email",name:"email",type:"email",value:e,onChange:e=>s(e.target.value),required:!0,className:"mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:g("emailPlaceholder",l.emailPlaceholder)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:g("password",l.password)}),(0,r.jsx)("input",{id:"password",name:"password",type:"password",value:t,onChange:e=>d(e.target.value),required:!0,className:"mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),(0,r.jsx)("div",{className:"flex items-center justify-end",children:(0,r.jsx)(o.default,{href:"/forgot-password",className:"text-sm text-primary-600 hover:text-primary-700",children:g("forgotPassword",l.forgotPassword)})}),(0,r.jsx)("div",{className:"pt-2",children:(0,r.jsx)("button",{type:"submit",disabled:c,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:c?g("signingIn",l.signingIn):g("signIn",l.signIn)})})]}),(0,r.jsx)("div",{className:"mt-6 text-center",children:(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[g("noAccount",l.noAccount)," ",(0,r.jsx)(o.default,{href:"/signup",className:"font-medium text-primary-600 hover:text-primary-700",children:g("signUp",l.signUp)})]})})]})})})}},509:function(e,s,t){"use strict";t.r(s),t.d(s,{LanguageProvider:function(){return o},useLanguage:function(){return i}});var r=t(3827),n=t(4090);let a=(0,n.createContext)(void 0);function o(e){let{children:s}=e,[t,o]=(0,n.useState)("en");return(0,n.useEffect)(()=>{let e=localStorage.getItem("supplier-portal-language");e&&["en","fr","ht","es"].includes(e)&&o(e)},[]),(0,r.jsx)(a.Provider,{value:{language:t,setLanguage:e=>{o(e),localStorage.setItem("supplier-portal-language",e)},t:(e,s)=>s[t]||s.en||e},children:s})}function i(){let e=(0,n.useContext)(a);if(void 0===e)throw Error("useLanguage must be used within a LanguageProvider");return e}},4599:function(e,s,t){"use strict";t.d(s,{createClient:function(){return a}});var r=t(101),n=t(9079);function a(){return(0,r.AY)(n.env.NEXT_PUBLIC_SUPABASE_URL,n.env.NEXT_PUBLIC_SUPABASE_ANON_KEY)}},7907:function(e,s,t){"use strict";var r=t(5313);t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}})}},function(e){e.O(0,[610,792,971,69,744],function(){return e(e.s=9461)}),_N_E=e.O()}]);